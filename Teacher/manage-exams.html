<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Danh sách lớp</title>
        <link rel="stylesheet" href="./styles/default.css" />
        <link rel="stylesheet" href="./styles/manage-exams.css" />
        <link
            href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
    </head>

    <body>
        <div id="layout">
            <div class="body"></div>
        </div>
    </body>
    <div class="layout">
        <div class="body">
            <nav class="mobile-nav flex align-center justify-center space-between">
                <a class="mobile-nav__logo flex align-center" href="">
                    <img
                        src="https://res.cloudinary.com/dkeeelvpa/image/upload/v1763564599/white_transparent_pruzhq.png"
                        alt=""
                    />
                </a>
                <button class="mobile-nav__menu-btn">
                    <i class="fa-solid fa-list-ul"></i>
                </button>
            </nav>
            <nav class="sidebar hidden">
                <a class="sidebar__logo flex align-center relative" href="dashboard.html">
                    <img
                        src="https://res.cloudinary.com/dkeeelvpa/image/upload/v1763564599/white_transparent_pruzhq.png"
                        alt=""
                    />
                </a>
                <div class="sidebar__devider"></div>
                <ul class="sidebar__list">
                    <li>
                        <a class="sidebar_item" title="Dashboard" href="./dashboard.html">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="lucide lucide-house"
                            >
                                <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" key="5wwlr5"></path>
                                <path
                                    d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                                    key="1d0kgt"
                                ></path>
                            </svg>
                        </a>
                    </li>
                    <li class="">
                        <a class="sidebar_item" title="Lớp" href="./manage-classes.html">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="lucide lucide-layers"
                            >
                                <path
                                    d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"
                                    key="8b97xw"
                                ></path>
                                <path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65" key="dd6zsq"></path>
                                <path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65" key="ep9fru"></path>
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a class="sidebar_item" title="Lịch trình" href="./schedule.html">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="lucide lucide-calendar-check2-icon lucide-calendar-check-2"
                            >
                                <path d="M8 2v4" />
                                <path d="M16 2v4" />
                                <path d="M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8" />
                                <path d="M3 10h18" />
                                <path d="m16 20 2 2 4-4" />
                            </svg>
                        </a>
                    </li>
                    <li class="active">
                        <a class="sidebar_item" title="Đề thi" href="./manage-exams.html">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="lucide lucide-folder"
                            >
                                <path
                                    d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"
                                    key="1kt360"
                                ></path>
                            </svg>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="content relative">
                <div class="topbar">
                    <button class="topbar__previos-btn">
                        <i class="fa-solid fa-arrow-left"></i>
                        <span>Quay lại</span>
                    </button>
                    <div class="topbar__left">
                        <span class="topbar__current-page">Bài kiểm tra</span>
                    </div>
                    <div class="topbar__right">
                        <div class="topbar__user">
                            <img
                                class="topbar__user-avatar"
                                src="https://jbagy.me/wp-content/uploads/2025/03/anh-avatar-vo-tri-meo-1.jpg"
                                alt=""
                            />
                            <div class="topbar__user-info">
                                <span class="topbar__user-name">Nguyen Van A</span>
                                <span class="topbar__user-role">Teacher</span>
                            </div>
                            <div class="topbar__user-dropdown-menu">
                                <ul>
                                    <li>
                                        <a href="">
                                            <i class="fa-regular fa-user"></i>
                                            Profile
                                        </a>
                                    </li>
                                    <li>
                                        <a href="">
                                            <i class="fa-solid fa-arrow-right-from-bracket"></i>
                                            Logout</a
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main-content">
                    <!-- Header -->
                    <div class="exam-header">
                        <h1 class="exam-header__title">Danh sách bài kiểm tra</h1>
                        <button class="btn btn-primary" id="createExamBtn">
                            <i class="fa-solid fa-plus"></i>
                            Tạo bài kiểm tra mới
                        </button>
                    </div>

                    <!-- Filters -->
                    <div class="exam-filters">
                        <div class="exam-filters__group">
                            <label for="filterClass">Lọc theo lớp:</label>
                            <select id="filterClass" class="filter-select">
                                <option value="">Tất cả lớp</option>
                            </select>
                        </div>
                        <div class="exam-filters__group">
                            <label for="filterType">Loại kỳ thi:</label>
                            <select id="filterType" class="filter-select">
                                <option value="">Tất cả</option>
                            </select>
                        </div>
                        <div class="exam-filters__group">
                            <label for="filterDateFrom">Từ ngày:</label>
                            <input type="date" id="filterDateFrom" class="filter-input" />
                        </div>
                        <div class="exam-filters__group">
                            <label for="filterDateTo">Đến ngày:</label>
                            <input type="date" id="filterDateTo" class="filter-input" />
                        </div>
                        <div class="exam-filters__actions">
                            <button class="btn btn-secondary" id="resetFilterBtn">
                                <i class="fa-solid fa-rotate-right"></i>
                                Đặt lại
                            </button>
                        </div>
                    </div>

                    <!-- Exam List -->
                    <div class="exam-list" id="examList">
                        <!-- Exam cards will be rendered here by JavaScript -->
                    </div>

                    <!-- Empty State -->
                    <div class="exam-empty hidden" id="examEmpty">
                        <i class="fa-solid fa-clipboard-list"></i>
                        <p>Không có bài kiểm tra nào</p>
                    </div>

                    <!-- Modal: Create/Edit Exam -->
                    <div class="exam-modal hidden" id="examModal">
                        <div class="exam-modal__overlay"></div>
                        <div class="exam-modal__content">
                            <div class="exam-modal__header">
                                <h2 id="modalTitle">Tạo bài kiểm tra mới</h2>
                                <button class="exam-modal__close" id="closeModalBtn">
                                    <i class="fa-solid fa-xmark"></i>
                                </button>
                            </div>

                            <!-- Step Indicator -->
                            <div class="wizard-steps">
                                <div class="wizard-step active" data-step="1">
                                    <div class="wizard-step__number">1</div>
                                    <div class="wizard-step__label">Thông tin bài thi</div>
                                </div>
                                <div class="wizard-step__line"></div>
                                <div class="wizard-step" data-step="2">
                                    <div class="wizard-step__number">2</div>
                                    <div class="wizard-step__label">Các phần thi</div>
                                </div>
                            </div>

                            <form class="exam-form" id="examForm">
                                <input type="hidden" id="examId" />

                                <!-- Step 1: Basic Info -->
                                <div class="wizard-content" id="step1" data-step="1">
                                    <div class="exam-form__group">
                                        <label for="examName">Tên bài kiểm tra <span class="required">*</span></label>
                                        <input
                                            type="text"
                                            id="examName"
                                            class="exam-form__input"
                                            placeholder="Nhập tên bài kiểm tra"
                                        />
                                    </div>

                                    <div class="exam-form__group">
                                        <label for="examType">Loại bài kiểm tra <span class="required">*</span></label>
                                        <select id="examType" class="exam-form__select">
                                            <option value="">-- Chọn loại --</option>
                                        </select>
                                    </div>

                                    <div class="exam-form__group">
                                        <label for="examClass">Chọn lớp <span class="required">*</span></label>
                                        <select id="examClass" class="exam-form__select">
                                            <option value="">-- Chọn lớp --</option>
                                        </select>
                                    </div>

                                    <div class="exam-form__row">
                                        <div class="exam-form__group">
                                            <label for="examDate">Ngày thi <span class="required">*</span></label>
                                            <input type="date" id="examDate" class="exam-form__input" />
                                        </div>
                                        <div class="exam-form__group">
                                            <label for="examRoom">Phòng thi <span class="required">*</span></label>
                                            <input
                                                type="text"
                                                id="examRoom"
                                                class="exam-form__input"
                                                placeholder="VD: Phòng A101"
                                            />
                                        </div>
                                    </div>

                                    <div class="exam-form__row">
                                        <div class="exam-form__group">
                                            <label for="startTime">Giờ bắt đầu <span class="required">*</span></label>
                                            <input type="time" id="startTime" class="exam-form__input" />
                                        </div>
                                        <div class="exam-form__group">
                                            <label for="endTime">Giờ kết thúc <span class="required">*</span></label>
                                            <input type="time" id="endTime" class="exam-form__input" />
                                        </div>
                                    </div>

                                    <div class="exam-form__group">
                                        <label for="maxScore">Điểm tối đa</label>
                                        <input
                                            type="number"
                                            id="maxScore"
                                            class="exam-form__input"
                                            value="100"
                                            min="0"
                                            max="1000"
                                        />
                                    </div>
                                </div>

                                <!-- Step 2: Exam Parts -->
                                <div class="wizard-content hidden" id="step2" data-step="2">
                                    <div class="exam-parts-header">
                                        <h3>Các phần thi</h3>
                                        <button type="button" class="btn btn-primary btn-sm" id="addPartBtn">
                                            <i class="fa-solid fa-plus"></i>
                                            Thêm phần thi
                                        </button>
                                    </div>

                                    <div class="exam-parts-list" id="examPartsList">
                                        <!-- Empty state -->
                                        <div class="exam-parts-empty" id="partsEmptyState">
                                            <i class="fa-solid fa-list"></i>
                                            <p>Chưa có phần thi nào. Click "Thêm phần thi" để bắt đầu.</p>
                                        </div>
                                    </div>

                                    <div class="exam-parts-summary">
                                        <div class="weightage-total">
                                            <span>Tổng trọng số:</span>
                                            <strong id="totalWeightage">0%</strong>
                                        </div>
                                        <div class="weightage-warning hidden" id="weightageWarning">
                                            <i class="fa-solid fa-triangle-exclamation"></i>
                                            Tổng trọng số phải bằng 100%
                                        </div>
                                    </div>
                                </div>

                                <!-- Form Actions -->
                                <div class="exam-form__actions">
                                    <button type="button" class="btn btn-secondary" id="cancelFormBtn">
                                        <i class="fa-solid fa-xmark"></i>
                                        Hủy
                                    </button>
                                    <button type="button" class="btn btn-secondary hidden" id="backBtn">
                                        <i class="fa-solid fa-arrow-left"></i>
                                        Quay lại
                                    </button>
                                    <button type="button" class="btn btn-primary" id="nextBtn">
                                        Tiếp
                                        <i class="fa-solid fa-arrow-right"></i>
                                    </button>
                                    <button type="submit" class="btn btn-primary hidden" id="submitFormBtn">
                                        <i class="fa-solid fa-check"></i>
                                        <span id="submitBtnText">Hoàn tất</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Modal: Delete Confirmation -->
                    <div class="delete-modal hidden" id="deleteModal">
                        <div class="delete-modal__overlay"></div>
                        <div class="delete-modal__content">
                            <div class="delete-modal__icon">
                                <i class="fa-solid fa-triangle-exclamation"></i>
                            </div>
                            <h2 class="delete-modal__title">Xác nhận xóa</h2>
                            <p class="delete-modal__message">
                                Bạn có chắc chắn muốn xóa bài kiểm tra "<span id="deleteExamName"></span>"?
                                <br />
                                Hành động này không thể hoàn tác.
                            </p>
                            <div class="delete-modal__actions">
                                <button class="btn btn-secondary" id="cancelDeleteBtn">
                                    <i class="fa-solid fa-xmark"></i>
                                    Hủy
                                </button>
                                <button class="btn btn-danger" id="confirmDeleteBtn">
                                    <i class="fa-solid fa-trash"></i>
                                    Xác nhận xóa
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./js/manage-exams.js"></script>
</html>
